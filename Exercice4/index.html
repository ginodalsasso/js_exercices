<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Exercice 4</title>
</head>
<body>
    
    <div class="container">
        <div id="wrapper"></div>
    </div>
<script>
        const wrapper = document.getElementById("wrapper") // Récupère l'élément avec l'ID "wrapper"

        // Crée un élément div avec la classe "carre"
        const carre = document.createElement("div")
        carre.classList.add("carre")

        wrapper.appendChild(carre);                     // Ajoute l'élément div créé en tant qu'enfant de l'élément avec l'ID "wrapper"

        function randomColor() {                        // Fonction pour générer une couleur aléatoire
            return Math.floor(Math.random() * 256)      // Génère un nombre aléatoire entre 0 et 255
        }

        count = 0 // compteur de carrés

        document.addEventListener("keydown", function(event) {
            // Vérifie si la touche flèche vers le bas est pressée
            if (event.key === "ArrowDown" && count < 224 ) {        
                const newCarre = carre.cloneNode()                  // Clone l'élément carré
                wrapper.appendChild(newCarre)                       // Ajoute le nouveau carré en tant qu'enfant au "wrapper"

                // Définit la couleur de fond du nouveu carré avec une couleur aléatoire
                newCarre.style.backgroundColor = `rgb(${randomColor()}, ${randomColor()}, ${randomColor()})`
                count++                                             // incrémente +1 carré
                const boxes = document.querySelectorAll(".carre")   // Selection des carrés clonés
                boxes.forEach(box => {                              // A chaque clics, le background du carré est transformé en noir
                    box.addEventListener("click", function() {
                    this.style.backgroundColor = "#000";
                    })
                })
            }
            else if (event.key === "ArrowUp") {
                const removeCarre = document.querySelector(".carre:last-child"); // Sélectionne le dernier carré ajouté
                removeCarre.remove()                                             // Supprime le dernier carré aujouté
            }
         })

</script>
</body>
</html>